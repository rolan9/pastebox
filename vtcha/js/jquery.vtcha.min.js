/**
  * vtcha
  * https://github.com/wolf-w/pastebox/tree/master/vtcha
  *
  * v 2015.02.15-01
  *
  * LICENCE Feel free to use, modify and redistribute this code. But please keep this copyright notice.
  * (c) Copyright 2015 Wolf Wortmann <wolf@wolfgang-m.de> / <http://elementcode.de>
  *
  * Needs modernizr.prefixed() from http://modernizr.com/download/#-shiv-cssclasses-prefixed-testprop-testallprops-domprefixes-load
  * and draggabilly from http://draggabilly.desandro.com
  * and dragdrop.js from https://github.com/codrops/DragDropInteractions (http://www.codrops.com)
  */
  $.fn.vtcha=function(a){$this=$(this);var e={ok:"vtcha_accepted_2K15",hide:null};$this.each(function(){function t(){r.attr("value",c.ok),setTimeout(function(){d.addClass("hide")},700)}function i(){function a(a){for(var e,t,i=a.length;i;e=parseInt(Math.random()*i),t=a[--i],a[i]=a[e],a[e]=t);return a}symb=s(),data=['<div class="target" data-match="1"><i class="fa fa-'+symb[1]+'"></i></div>','<div class="target" data-match="0"><i class="fa fa-'+symb[0]+'"></i></div>','<div class="target" data-match="2"><i class="fa fa-'+symb[2]+'"></i></div>'],arr=a(data);var e='<div class="vtcha">  <div class="intro">Put one item in his target box.</div>  <div class="item-box">    <div class="item-background-wrap">      <div class="item-styles item-background"><i class="fa fa-'+symb[0]+'"></i></div>      <div class="item-styles item-background"><i class="fa fa-'+symb[1]+'"></i></div>      <div class="item-styles item-background"><i class="fa fa-'+symb[2]+'"></i></div>    </div>    <div class="item-wrap">      <div class="item-styles item" data-value="0"><i class="fa fa-'+symb[0]+'"></i></div>      <div class="item-styles item" data-value="1"><i class="fa fa-'+symb[1]+'"></i></div>      <div class="item-styles item" data-value="2"><i class="fa fa-'+symb[2]+'"></i></div>    </div>  </div>  <div class="target-box">'+arr[0]+arr[1]+arr[2]+"  </div></div>";return e}function s(){function a(){for(var d=0;2>=d;d++)r[d]=i+parseInt(Math.random()*(s+1-i)),c[d]=t[r[d]];e()&&a()}function e(){return r[0]==r[1]||r[0]==r[2]||r[1]==r[2]?!0:!1}var t=["anchor","asterisk","bed","bank","bell","bicycle","binoculars","bomb","book","briefcase","bug","bullhorn","bus","camera","car","child","cloud","coffee","compass","cutlery","database","desktop","diamond","envelope","eye","eyedropper","female","fighter-jet","flag","gamepad","gavel","glass","globe","gift","heart","leaf","image","magic","lock","map-marker","music","microphone","paper-plane","moon-o","pencil","plug","recycle","retweet","road","rocket","star","thumbs-down","trophy","tree","umbrella","volume-off","video-camera","user-secret","warning","wrench","wifi"],i=2,s=60,r=[],c=[];return a(),c}var r=$(this),c=$.extend({},e,a),d=$(i()),n=d.find(".target-box"),l=n.find(".target"),o=d.find(".item"),m=[];d.insertAfter(r),r.attr("hidden",!0),$(c.hide).hide(100),l.each(function(a,e){m.push(new Droppable(e,{onDrop:function(a,e){$target=$(a.el),$item=$(e),$target.attr("data-match")==$item.attr("data-value")?($target.addClass("complete").parent().addClass("complete"),$item.parent().find(".item").remove(),t()):setTimeout(function(){$item.removeClass("is-dropped"),$item.removeClass("is-complete")},500)}}))}),o.each(function(a,e){new Draggable(e,m,{draggabilly:{containment:d[0]},onStart:function(){n.addClass("show")},onEnd:function(){n.removeClass("show")}})})})};
